<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover" />
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Content-Language" content="zh-cn" />
    <meta name="Copyright" content="" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="applicable-device" content="mobile">
    <link rel="stylesheet" href="style/index.css" />
    <script type="text/javascript">
        (function (win,doc,flag){
            if (!win.addEventListener) return;
            var resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize';
            function setFont(){
                switch(flag){
                    case 'height':
                        var flagValue=window.innerHeight||567;
                        if (!flagValue) return;
                        document.documentElement.style.fontSize=100*(flagValue/1134)+'px';  
                        break;
                    default:
                        var flagValue=window.innerWidth||375;
                        if (!flagValue) return;
                        document.documentElement.style.fontSize=100*(flagValue/720)+'px';  
                }
                  
            }  
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, setFont, false);
            setFont();
        })(window,document,'width'); // 如果要按高度来改变字体大小，将'width'换成height'
    </script>
</head>
<body>
    <div class="page page_index">
        <div class="hand"></div>
        <div class="hand_cover"></div>
    </div>



</body>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript">
$(function(){

        var shake = (function(){
            var speed = 25; //摇一摇速度的临界值
            var x = y = z = lastX = lastY = lastZ = 0;
            var isShaking = false; //是否在动画中
            return function init(callback){
                if(window.DeviceMotionEvent){
                    window.addEventListener('devicemotion', function(){deviceMotionHandler(callback);}, false)
                }else{
                    alert("not support mobile motion event");
                }
            }

            function deviceMotionHandler(callback){
            /*获取x,y,z方向的即时速度*/
            var acceleration = event.accelerationIncludingGravity;
            x = acceleration.x;y = acceleration.y;z = acceleration.z;
            if(Math.abs(x-lastX) > speed || Math.abs(y-lastY) > speed || Math.abs(z-lastZ) > speed){
                if(!isShaking){
                    //手机震动一秒
                    if (navigator.vibrate) {
                        navigator.vibrate(1000);
                    }else if (navigator.webkitVibrate) {
                        navigator.webkitVibrate(1000);
                    }else if(navigator.mozVibrate){
                        navigator.mozVibrate(1000);
                    }
                }else if(navigator.msVibrate){
                    navigator.msVibrate(1000);
                }
                isShaking = true;
                $('.hand').addClass('play');
                setTimeout(function(){
                    callback();
                    isShaking = false;
                    $('.hand').removeClass('play');
                },2000);
            }
            lastX = x;lastY = y;lastZ = z;
        }
    }());

});

</script>
</html>